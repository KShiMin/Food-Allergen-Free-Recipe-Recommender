<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Recipe App</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    >

    <style>
      html, body {
        height: 100%;
        margin: 0;
      }
      body {
        /* full‐screen background */
        background: url("{{ url_for('static', filename='image/p1.jpg') }}")
                    no-repeat center center fixed;
        background-size: cover;

        /* flex to center the box */
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* make the box semi-opaque */
      .welcome-box {
        background-color: rgba(255, 255, 255, 0.85);
        padding: 2rem;
        border-radius: 0.5rem;
        box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.15);
        max-width: 400px;
        width: 100%;
        text-align: center;
      }

      /* modal also semi-opaque */
      .modal-content {
        background-color: rgba(255, 255, 255, 0.9);
      }
    </style>
  </head>
  <body>
    <div class="welcome-box">
      <h2 class="mb-4">Welcome to Food Allergen Free Recipe Recommender</h2>

      <!-- Login Button -->
      <button
        class="btn btn-primary w-100 mb-3"
        data-bs-toggle="modal"
        data-bs-target="#loginModal"
      >
        Login
      </button>

      <!-- flash messages -->
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for cat, msg in messages %}
            <div class="alert alert-{{cat}} alert-dismissible fade show" role="alert">
              {{ msg }}
              <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      <small class="text-muted">
        Don’t have an account? <a href="#">Register here</a>
      </small>
    </div>

    <!-- Login Modal -->
    <div
      class="modal fade"
      id="loginModal"
      tabindex="-1"
      aria-labelledby="loginModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <form class="modal-content" method="POST" action="{{ url_for('login') }}">
          <div class="modal-header">
            <h5 class="modal-title" id="loginModalLabel">Login</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <div class="mb-3 text-start">
              <label for="username" class="form-label">Username</label>
              <input
                type="text"
                class="form-control"
                id="username"
                name="username"
                required
              >
            </div>
            <div class="mb-3 text-start">
              <label for="password" class="form-label">Password</label>
              <input
                type="password"
                class="form-control"
                id="password"
                name="password"
                required
              >
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
              Cancel
            </button>
            <button type="submit" class="btn btn-primary">Sign In</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    ></script>
  </body>
</html>
